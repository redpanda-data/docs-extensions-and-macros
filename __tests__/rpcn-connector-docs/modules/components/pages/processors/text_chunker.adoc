= text_chunker
// tag::single-source[]
:type: processor
:status: experimental
:categories: [AI]
:description: A processor that allows chunking and splitting text based on some strategy. Usually used for creating vector embeddings of large documents.

component_type_dropdown::[]

// This content is autogenerated. Do not edit manually. To override descriptions or summaries, use the doc-tools CLI with the --overrides option.

A processor that allows chunking and splitting text based on some strategy. Usually used for creating vector embeddings of large documents.


[tabs]
======
Common::
+
--
```yaml
processor:
  label: ""
  text_chunker:
    strategy: "" # No default (required)
    chunk_size: 512
    chunk_overlap: 100
    separators:
      - "\n\n"
      - "\n"
      - " "
      - ""
    length_measure: "runes"
    include_code_blocks: false
    keep_reference_links: false
```
--
Advanced::
+
--
```yaml
processor:
  label: ""
  text_chunker:
    strategy: "" # No default (required)
    chunk_size: 512
    chunk_overlap: 100
    separators:
      - "\n\n"
      - "\n"
      - " "
      - ""
    length_measure: "runes"
    token_encoding: "" # No default (optional)
    allowed_special:
      []
    disallowed_special:
      - all
    include_code_blocks: false
    keep_reference_links: false
```
--
======

A processor allowing splitting text into chunks based on several different strategies.

// This content is autogenerated. Do not edit manually. To override descriptions, use the doc-tools CLI with the --overrides option.

== Fields

=== `allowed_special[]`

A list of special tokens that are allowed in the output.

*Type*: `string`

*Default*:
[source,yaml]
----
[]
----

=== `chunk_overlap`

The number of characters to overlap between chunks.

*Type*: `int`

*Default*: `100`

=== `chunk_size`

The maximum size of each chunk.

*Type*: `int`

*Default*: `512`

=== `disallowed_special[]`

A list of special tokens that are disallowed in the output.

*Type*: `string`

*Default*:
[source,yaml]
----
- all
----

=== `include_code_blocks`

Whether to include code blocks in the output.

*Type*: `bool`

*Default*: `false`

=== `keep_reference_links`

Whether to keep reference links in the output.

*Type*: `bool`

*Default*: `false`

=== `length_measure`

The method for measuring the length of a string.

*Type*: `string`

*Default*: `runes`

[cols="1m,2a"]
|===
|Option |Summary

|graphemes
|Use unicode graphemes to determine the length of a string.

|runes
|Use the number of codepoints to determine the length of a string.

|token
|Use the number of tokens (using the `token_encoding` tokenizer) to determine the length of a string.

|utf8
|Determine the length of text using the number of utf8 bytes.

|===

=== `separators[]`

A list of strings that should be considered as separators between chunks.

*Type*: `string`

*Default*:
[source,yaml]
----
- "\n\n"
- "\n"
- " "
- ""
----

=== `strategy`

*Type*: `string`

[cols="1m,2a"]
|===
|Option |Summary

|markdown
|Split text by markdown headers.

|recursive_character
|Split text recursively by characters (defined in `separators`).

|token
|Split text by tokens.

|===

=== `token_encoding`

The encoding to use for tokenization.

*Type*: `string`

[source,yaml]
----
# Examples:
token_encoding: cl100k_base
token_encoding: r50k_base

----



