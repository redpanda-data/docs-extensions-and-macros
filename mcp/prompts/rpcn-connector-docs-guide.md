# Redpanda Connect Reference Documentation: LLM Prompt Guide

Redpanda Connect reference documentation is generated using a combination of:

- **Autogenerated content**: Produced from source code and schemas, providing a baseline of all available fields, types, and options.
- **Overrides**: A JSON file (`overrides.json`) that allows technical writers to override, deduplicate, clarify, and cross-reference field descriptions using a DRY (Don't Repeat Yourself) approach.

## Repository folder structure

- `/docs`: Built documentation site (HTML, assets, and static files for all Redpanda Connect docs versions)
- `/docs-data`: Source data for reference docs, including `overrides.json` and autogenerated JSON files
- `/modules`: Modular AsciiDoc content for guides, cookbooks, and reference topics
- `/package.json`, `README.adoc`, `antora.yml`: Project configuration and metadata
- `/.github`: GitHub workflows and Copilot custom instructions

## `$ref` syntax

- The `$ref` syntax is used in the overrides file to avoid repeating identical or similar descriptions for fields that appear in multiple places.
- Instead of duplicating a description, a field can reference a central definition using:

  ```json
  "$ref": "#/definitions/field_name"
  ```

- The referenced definition is found in the `definitions` section at the top of `overrides.json`.
- This approach ensures consistency, simplifies updates, and enables cross-referencing between related fields.

## How reference docs are structured

- **Autogenerated files** (such as `.adoc` or `.json`): List all fields, types, options, and sometimes examples, but may lack clarity, deduplication, or cross-references.
- **Overrides file** (`overrides.json`):
  - Contains a `definitions` section for reusable field descriptions.
  - Uses `$ref` to point fields in the autogenerated structure to these definitions.
  - Allows for cross-references between related fields (such as "see also", "must be used with", etc.).
  - Supports enhancements for clarity, user-friendliness, and technical accuracy.

## Example

```json
"definitions": {
  "client_certs": {
    "description": "A list of client certificates for mutual TLS (mTLS) authentication. ... (full description here)"
  }
},
"inputs": [
  {
    "name": "amqp_0_9",
    "config": {
      "children": [
        {
          "name": "tls",
          "$ref": "#/definitions/tls",
          "children": [
            {
              "name": "client_certs",
              "$ref": "#/definitions/client_certs"
            }
          ]
        }
      ]
    }
  }
]
```

## Your workflow

When asked to improve or work with Redpanda Connect reference documentation:

1. **Read the overrides file**: Always start by reading `docs-data/overrides.json` to understand the current structure and definitions.

2. **Understand the `$ref` system**: Do not duplicate descriptions; suggest improvements to central definitions and update references as needed.

3. **Make improvements**:
   - Suggest improvements for clarity, consistency, and user experience, especially in the `definitions` section
   - Identify opportunities for new or improved cross-references between related fields
   - Create new definition objects for missing references or enhance existing ones
   - Recommend deduplication: If you find repeated inline descriptions, propose moving them to a definition and referencing them with `$ref`

4. **Update the overrides file**: Use the Edit or Write tool to update `docs-data/overrides.json` with your changes.

5. **Regenerate documentation**: Use the `generate_rpcn_connector_docs` MCP tool to regenerate the documentation with your changes.
   - Default branch is "main"
   - Can specify a different branch if needed

6. **Explain your changes**: Provide a clear explanation of what you changed and why.

## Quality Checks You Must Perform

- **Preserve technical accuracy**: Ensure that all field descriptions are correct, actionable, and user-friendly
- **Maintain DRY principles**: Avoid unnecessary repetition in the documentation
- **Validate JSON syntax**: Ensure the overrides file remains valid JSON after your changes
- **Check $ref references**: Ensure all `$ref` references point to valid definitions
- **Maintain consistency**: Use consistent terminology and formatting across all descriptions

## Output expectations

When asked for improvements, your output should include:

- Suggested changes to the `definitions` section
- Proposed new or updated `$ref` references
- Rationale for changes (clarity, deduplication, cross-linking, etc.)
- Any additional user experience or technical writing enhancements
- Summary of what will be regenerated

## Summary for LLMs

When working with Redpanda Connect reference documentation:

1. Read `docs-data/overrides.json` first to understand the current structure
2. Make your improvements to the definitions and $ref references
3. Update the overrides file using Edit or Write tool
4. Use the `generate_rpcn_connector_docs` MCP tool to regenerate documentation
5. Explain what was changed and why

Critical requirements:
- Always respect the `$ref` system - don't duplicate descriptions
- Maintain DRY principles throughout
- Validate JSON syntax after changes
- Preserve technical accuracy
- Ensure all `$ref` references are valid
